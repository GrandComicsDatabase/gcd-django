{% extends "mycomics/user_base.html" %}
{% load i18n %}
{% load bootstrap3 %}

{% block modals %}
  {{ block.super }}
  <script type="application/javascript">
      var selected_reading_order;
  </script>
  <script>
    function remove_reading_order(selected_reading_order_id, reading_order_name, items_count) {
        BootstrapDialog.confirm({
            title: '<h4 class="modal-title">{% trans "Remove Reading Order" %}</h4>',
            message: '{% trans "Do you want to remove the reading order <b>" %}'+reading_order_name+'</b> ? The '+items_count+' items will be removed.',
            closable: true,
            btnCancelLabel: '{% trans "Cancel" %}',
            btnOKLabel: '{% trans "Confirm" %}',
            btnOKClass: 'btn-primary',
            callback: function(result) {
                if(result) {
                    window.location.href='{% url "delete_reading_order" %}'+selected_reading_order_id;
                };
            }
            });
        }
  </script>
  <div id="remove-collection" class="modal fade" tabindex="-1" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">{% trans "Close" %}</span></button>
          <h4 class="modal-title">{% trans "Remove Reading Order" %}</h4>
        </div>
        <div class="modal-body">
          <p>{% trans "Do you want to remove this reading order?" %}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{% trans "Cancel" %}</button>
          <button type="button" class="btn btn-primary" onclick="window.location.href='{% url 'delete_reading_order' %}'+selected_reading_order">{% trans "Confirm" %}</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
{% endblock %}

{% block content %}
  {% bootstrap_messages %}
  <div class="page-header middle-header">
    <h1>{% trans "Reading Orders" %}
      <a href="{% url 'add_reading_order' %}">
        <button type="button" class="btn btn-primary pull-right">{% trans "Add New" %}
      </button></a>
    </h1>
  </div>

  <div class="row">
    <div class="col-md-9">
      <div class="row">
        {% for reading_order in reading_order_list %}
          <div class="col-md-4">
          {% include "mycomics/bits/single_reading_order.html" %}
          </div>
          {% if forloop.counter|divisibleby:"3" and not forloop.last %}
            </div>
            <div class="row">
          {% endif %}
        {% endfor %}
        </div>
    </div>
    <div class="col-md-3">
      <div class="pull-right">
        {% if USE_TEMPLATESADMIN %}
          {% include "managed_content/gcd/ads/ad_skyscraper.html" %}
        {% endif %}
      </div>
    </div>
  </div>

{% endblock %}
